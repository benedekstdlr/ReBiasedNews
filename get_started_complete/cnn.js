'use strict';
console.log("CNN");

var title=document.getElementsByClassName("pg-headline")[0];
var firstpar=document.getElementsByClassName("el__leafmedia el__leafmedia--sourced-paragraph")[0];
console.log(firstpar);
var footer = document.getElementsByClassName("zn-body__paragraph zn-body__footer")[0];
var content = document.getElementsByClassName("zn-body-text")[0];
console.log(firstpar.innerHTML);
console.log(footer);


var request = new XMLHttpRequest();

request.open('POST', 'https://rebiasednews.ddns.net', true);
request.onload = function() {
    if(this.response === undefined || this.response.length == 0) {
        // TODO: nothing found
        console.log(this.response);
        console.log("Nothing found");
    } else {
        var resp = this.response;
        console.log(resp);
        content.innerHTML = firstpar.innerHTML + '<p>' + resp +'</p>'+ '<p class="zn-body__paragraph zn-body__footer"> This article was generated by a ROBOT</p>';
    }
};
request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
var data = JSON.stringify({"title": title.textContent, "body": firstpar.textContent});
request.send(data);
